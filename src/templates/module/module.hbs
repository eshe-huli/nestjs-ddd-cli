import { Module } from "@nestjs/common";
import { CqrsModule } from "@nestjs/cqrs";
import { TypeOrmModule } from "@nestjs/typeorm";

// Infrastructure
import { OrmEntities } from "@modules/{{moduleNameKebab}}/infrastructure/orm-entities";
import { Repositories } from "@modules/{{moduleNameKebab}}/infrastructure/repositories";
import { Mappers } from "@modules/{{moduleNameKebab}}/infrastructure/mappers";

// Application - Commands
import { CommandHandlers } from "@modules/{{moduleNameKebab}}/application/commands";

// Application - Queries
import { Queries } from "@modules/{{moduleNameKebab}}/application/queries";

// Application - Use Cases
import { UseCases } from "@modules/{{moduleNameKebab}}/application/domain/usecases";

// Application - Services
import { Services } from "@modules/{{moduleNameKebab}}/application/domain/services";

// Application - Controllers
import { Controllers } from "@modules/{{moduleNameKebab}}/application/controllers";

@Module({
  imports: [
    TypeOrmModule.forFeature([...OrmEntities]),
    CqrsModule,
  ],
  controllers: [...Controllers],
  providers: [
    // CQRS handlers
    ...CommandHandlers,
    ...Queries,
    // Domain layer
    ...UseCases,
    ...Services,
    // Infrastructure layer
    ...Repositories,
    ...Mappers,
  ],
  exports: [
    // Export repositories for use in other modules
    ...Repositories,
    // Export mappers for use in other modules
    ...Mappers,
  ],
})
export class {{moduleNamePascal}}Module {}
