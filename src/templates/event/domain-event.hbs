import { IEvent } from "@nestjs/cqrs";

export interface {{entityNamePascal}}EventData {
  // Define your event payload here
  // Example:
  // name: string;
  // email: string;
{{#each fields}}
  {{this.camelCase}}{{#if this.isOptional}}?{{/if}}: {{this.tsType}};
{{/each}}
}

export class {{entityNamePascal}}{{eventName}}Event implements IEvent {
  public readonly occurredAt: Date;
  public readonly eventType = "{{entityNamePascal}}{{eventName}}";

  constructor(
    public readonly {{entityNameCamel}}Id: string,
    public readonly data: {{entityNamePascal}}EventData,
    public readonly metadata?: {
      correlationId?: string;
      causationId?: string;
      userId?: string;
    }
  ) {
    this.occurredAt = new Date();
  }

  /**
   * Get a string representation of the event for logging
   */
  toString(): string {
    return `${this.eventType}(${this.{{entityNameCamel}}Id}) at ${this.occurredAt.toISOString()}`;
  }
}
